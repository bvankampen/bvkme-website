apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-conf
data:
  default.conf: |
    server {
        listen       8080;
        server_name  localhost;

        absolute_redirect off;

        location / {
            root   /usr/share/nginx/html;
            index  index.html index.htm;
        }

        add_header Content-Security-Policy "frame-ancestors 'self';block-all-mixed-content;default-src 'self';script-src 'self' 'sha256-mC5lwOEBZZZXJoN3sDvzxnxAdNIEKujq9NSXgmhc4HM=' 'sha256-iIf+c/EMxKD/FXoUDy0YsZ3mE+JhzPsmR+aVbrjkdwM=' 'report-sample' 'unsafe-inline' https://static.cloudflareinsights.com;style-src 'self' 'sha256-qOUXaVhMwjZmqqi5+W6pNR5QK3wCiUgqOEkYBZAaaG4=' 'sha256-oP0lUXNLVta8iZrBpndNfoYaLUqtOFUepmmF7cSSmKY=' 'sha256-+YWRMZ88jMyO7jVlBA52tZADiPobPIUA8LAWee68Fvs=' 'sha256-umDNa5+wEukAb2uOcsXGyk7fH4cAtGIdY/LxD4cAOWs=' 'sha256-FI2V0tcYCmlxWCS2yvjBtDyaaZj1TbWYUMZ3W+/1CqY=' 'report-sample' 'unsafe-inline';object-src 'none';frame-src 'self';child-src 'self';img-src 'self' data:;font-src 'self';connect-src 'self' cloudflareinsights.com;manifest-src 'self';base-uri 'self';form-action 'self';media-src 'self';prefetch-src 'self';worker-src 'self';"

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /usr/share/nginx/html;
        }

    }